<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Login</title>
    <link rel="stylesheet" type="text/css" href="css/main.css">

    <!-- Firebase App (the core Firebase SDK) is always required and must be listed first -->
    <script  src="https://www.gstatic.com/firebasejs/7.5.0/firebase-app.js"></script>

    <!-- If you enabled Analytics in your project, add the Firebase SDK for Analytics -->
    <script src="https://www.gstatic.com/firebasejs/7.5.0/firebase-analytics.js"></script>

    <!-- Add Firebase products that you want to use -->
    <script src="https://www.gstatic.com/firebasejs/7.5.0/firebase-auth.js"></script>
    <script src="https://www.gstatic.com/firebasejs/7.5.0/firebase-firestore.js"></script>
    <script src="https://www.gstatic.com/firebasejs/7.5.0/firebase-messaging.js"></script>
    <script src="https://www.gstatic.com/firebasejs/7.5.0/firebase-analytics.js"></script>
    <script src="https://www.gstatic.com/firebasejs/7.5.0/firebase-database.js"></script>


    <script src="app.js"></script>
    <script>
        firebase.auth().onAuthStateChanged(function(user) {
            if (user) {
                window.location.replace("index.html");
            } else {
                // No user is signed in.
            }
        });

        function login()
        {
            var userEmail = document.getElementById("email_field").value;
            var userPass = document.getElementById("password_field").value;

            firebase.auth().signInWithEmailAndPassword(userEmail, userPass).catch(function(error) {
                // Handle Errors here.
                var errorCode = error.code;
                var errorMessage = error.message;
                alert("Sorry, " + errorMessage);
                // ...
            });
        }

        function signUp()
        {
            var userEmail = document.getElementById("email_field").value;
            var userPass = document.getElementById("password_field").value;

            firebase.auth().createUserWithEmailAndPassword(userEmail, userPass).catch(function(error) {
                // Handle Errors here.
                var errorCode = error.code;
                var errorMessage = error.message;
                alert("Sorry, " + errorMessage);
                // ...
            });


            database.ref("users/").set({
                firstName: "Sebas",
                lastName: "Quiros"
            });
        }

    </script>
</head>
<body>
    <div id = "input-form">
        Username:
        <input type = "text" name = "username" id = "email_field"/>
        <br>
        Password:
        <input type = "password" name = "password" id = "password_field"/>
        <br>

        <button onclick = "login()" id = "loginButton">Log In</button>
        <button onclick = "signUp()" id = "signUpButton">Sign Up</button>
    </div>
</body>
</html>